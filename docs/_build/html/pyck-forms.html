

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The pyck.forms Package &mdash; PyCK 0.6.6 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.6.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="PyCK 0.6.6 documentation" href="index.html" />
    <link rel="next" title="The pyck.controllers Package" href="pyck-controllers.html" />
    <link rel="prev" title="The Problem (The Why? of Form Library)" href="form-validation-library-choice.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pyck-controllers.html" title="The pyck.controllers Package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="form-validation-library-choice.html" title="The Problem (The Why? of Form Library)"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PyCK 0.6.6 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-pyck.forms">
<span id="the-pyck-forms-package"></span><span id="pyck-forms"></span><h1>The pyck.forms Package<a class="headerlink" href="#module-pyck.forms" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-pyck.forms"></span><p>The PyCK Forms Package</p>
<dl class="class">
<dt id="pyck.forms.Form">
<em class="property">class </em><tt class="descclassname">pyck.forms.</tt><tt class="descname">Form</tt><big>(</big><em>formdata=None</em>, <em>obj=None</em>, <em>prefix=''</em>, <em>request_obj=None</em>, <em>use_csrf_protection=False</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pyck.forms.Form" title="Permalink to this definition">¶</a></dt>
<dd><p>The Form base class, extends from WTForms.Form</p>
<p>This class provides some additional features to the base wtforms.Form class. These include:</p>
<ul>
<li><dl class="first docutils">
<dt>Methods to render the form in HTML</dt>
<dd><ul class="first last simple">
<li>as_p to render form using p tags</li>
<li>as_table to render using html table</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">CSRF protection availability</p>
</li>
<li><p class="first">TODO: Since WTForms wants presentation attributes (like rows and cols for textarea) to be set on</p>
</li>
</ul>
<p>instantiated form instances (not the class itself), allow some way to specify field attributes
that are then read at field display time. Possibly a field_attrs dict??? May be reimplementing sub-classes of some
fields to make use of it would be a good idea??</p>
<dl class="method">
<dt id="pyck.forms.Form.as_p">
<tt class="descname">as_p</tt><big>(</big><em>labels='top'</em>, <em>errors='right'</em><big>)</big><a class="headerlink" href="#pyck.forms.Form.as_p" title="Permalink to this definition">¶</a></dt>
<dd><p>Output each form field as html <strong>p</strong> tags. By default labels are displayed on top of the form fields
and validation erros are displayed on the right of the form fields. Both these behaviors can be
changed by settings values for the labels and errors parameters.</p>
<p>Values can be left, top, right or bottom</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>labels</strong> &#8211; Placement of labels relative to the field</li>
<li><strong>errors</strong> &#8211; Placement of validation errors (if any) relative to the field</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyck.forms.Form.as_table">
<tt class="descname">as_table</tt><big>(</big><em>labels='left'</em>, <em>errors='top'</em>, <em>include_table_tag=False</em><big>)</big><a class="headerlink" href="#pyck.forms.Form.as_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Output the form as HTML Table, optionally add the table tags too if include_table_tag is set to True (default False)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>labels</strong> &#8211; Placement of labels relative to the field</li>
<li><strong>errors</strong> &#8211; Placement of validation errors (if any) relative to the field</li>
<li><strong>include_table_tag</strong> &#8211; Whether to include the html &lt;table&gt; and &lt;/table&gt; tags in the output or not</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyck.forms.Form.validate">
<tt class="descname">validate</tt><big>(</big><big>)</big><a class="headerlink" href="#pyck.forms.Form.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate form fields and check for CSRF token match if use_csrf_protection was set to true when
initializing the form.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pyck.forms.model_form">
<tt class="descclassname">pyck.forms.</tt><tt class="descname">model_form</tt><big>(</big><em>model</em>, <em>db_session=None</em>, <em>base_class=&lt;class 'pyck.forms.form.Form'&gt;</em>, <em>only=None</em>, <em>exclude=None</em>, <em>field_args=None</em>, <em>converter=None</em>, <em>exclude_pk=True</em>, <em>exclude_fk=True</em>, <em>type_name=None</em><big>)</big><a class="headerlink" href="#pyck.forms.model_form" title="Permalink to this definition">¶</a></dt>
<dd><p>A Wrapper around <tt class="xref py py-func docutils literal"><span class="pre">wtforms.ext.sqlalchemy.orm.model_form()</span></tt> function to facilitate creating model
forms using a wtforms compatible model_form call but using <a class="reference internal" href="#pyck.forms.Form" title="pyck.forms.Form"><tt class="xref py py-class docutils literal"><span class="pre">pyck.forms.Form</span></tt></a>
Create a wtforms Form for a given SQLAlchemy model class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyck.forms</span> <span class="kn">import</span> <span class="n">model_form</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="n">UserForm</span> <span class="o">=</span> <span class="n">model_form</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>model</strong> &#8211; A SQLAlchemy mapped model class.</li>
<li><strong>base_class</strong> &#8211; Base form class to extend from. Must be a <tt class="docutils literal"><span class="pre">wtforms.Form</span></tt> subclass.</li>
<li><strong>only</strong> &#8211; An optional iterable with the property names that should be included in
the form. Only these properties will have fields.</li>
<li><strong>exclude</strong> &#8211; An optional iterable with the property names that should be excluded
from the form. All other properties will have fields.</li>
<li><strong>field_args</strong> &#8211; An optional dictionary of field names mapping to keyword arguments used
to construct each field object.</li>
<li><strong>converter</strong> &#8211; A converter to generate the fields based on the model properties. If
not set, <tt class="docutils literal"><span class="pre">ModelConverter</span></tt> is used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyck.forms.dojo_model_form">
<tt class="descclassname">pyck.forms.</tt><tt class="descname">dojo_model_form</tt><big>(</big><em>model</em>, <em>db_session=None</em>, <em>base_class=&lt;class 'pyck.forms.form.Form'&gt;</em>, <em>only=None</em>, <em>exclude=None</em>, <em>field_args=None</em>, <em>converter=None</em>, <em>exclude_pk=True</em>, <em>exclude_fk=True</em>, <em>type_name=None</em><big>)</big><a class="headerlink" href="#pyck.forms.dojo_model_form" title="Permalink to this definition">¶</a></dt>
<dd><p>A Wrapper around <tt class="xref py py-func docutils literal"><span class="pre">wtforms.ext.sqlalchemy.orm.model_form()</span></tt> function to facilitate creating model
forms using a wtforms compatible model_form call but using <a class="reference internal" href="#pyck.forms.Form" title="pyck.forms.Form"><tt class="xref py py-class docutils literal"><span class="pre">pyck.forms.Form</span></tt></a> and <a href="#id1"><span class="problematic" id="id2">:module:`WTDojo`</span></a>
form components</p>
<p>Create a wtforms Form for a given SQLAlchemy model class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyck.forms</span> <span class="kn">import</span> <span class="n">dojo_model_form</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="n">UserForm</span> <span class="o">=</span> <span class="n">dojo_model_form</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>model</strong> &#8211; A SQLAlchemy mapped model class.</li>
<li><strong>base_class</strong> &#8211; Base form class to extend from. Must be a <tt class="docutils literal"><span class="pre">wtforms.Form</span></tt> subclass.</li>
<li><strong>only</strong> &#8211; An optional iterable with the property names that should be included in
the form. Only these properties will have fields.</li>
<li><strong>exclude</strong> &#8211; An optional iterable with the property names that should be excluded
from the form. All other properties will have fields.</li>
<li><strong>field_args</strong> &#8211; An optional dictionary of field names mapping to keyword arguments used
to construct each field object.</li>
<li><strong>converter</strong> &#8211; A converter to generate the fields based on the model properties. If
not set, <tt class="docutils literal"><span class="pre">ModelConverter</span></tt> is used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Here is an example usage to demonstrate the improvements:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyck.forms</span> <span class="kn">import</span> <span class="n">Form</span>
<span class="kn">from</span> <span class="nn">wtforms</span> <span class="kn">import</span> <span class="n">TextField</span><span class="p">,</span> <span class="n">validators</span>
<span class="k">class</span> <span class="nc">MyForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">TextField</span><span class="p">(</span><span class="s">&quot;Name&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">validators</span><span class="o">.</span><span class="n">required</span><span class="p">()])</span>
    <span class="n">fname</span> <span class="o">=</span> <span class="n">TextField</span><span class="p">(</span><span class="s">&quot;Father&#39;s Name&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">validators</span><span class="o">.</span><span class="n">required</span><span class="p">()])</span>

<span class="n">myform</span> <span class="o">=</span> <span class="n">MyForm</span><span class="p">()</span>
<span class="nb">str</span><span class="p">(</span><span class="n">myform</span><span class="o">.</span><span class="n">as_p</span><span class="p">())</span>
<span class="s">r&#39;\n&lt;p&gt;\n&lt;label for=&quot;name&quot;&gt;Name&lt;/label&gt;&lt;br /&gt; &lt;input id=&quot;name&quot; name=&quot;name&quot; type=&quot;text&quot; value=&quot;&quot; /&gt; &lt;/p&gt;\n\n&lt;p&gt;\n&lt;label for=&quot;fname&quot;&gt;Father</span><span class="se">\&#39;</span><span class="s">s Name&lt;/label&gt;&lt;br /&gt; &lt;input id=&quot;fname&quot; name=&quot;fname&quot; type=&quot;text&quot; value=&quot;&quot; /&gt; &lt;/p&gt;\n&#39;</span>
<span class="n">myform</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
<span class="bp">False</span>
<span class="nb">str</span><span class="p">(</span><span class="n">myform</span><span class="o">.</span><span class="n">as_p</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;right&#39;</span><span class="p">))</span>
<span class="s">&#39;</span><span class="se">\n</span><span class="s">&lt;p&gt;</span><span class="se">\n</span><span class="s">&lt;label for=&quot;name&quot;&gt;Name&lt;/label&gt; &lt;input id=&quot;name&quot; name=&quot;name&quot; type=&quot;text&quot; value=&quot;&quot; /&gt; &lt;span class=&quot;errors&quot;&gt;This field is required.&lt;/span&gt; &lt;/p&gt;</span><span class="se">\n\n</span><span class="s">&lt;p&gt;</span><span class="se">\n</span><span class="s">&lt;label for=&quot;fname&quot;&gt;Father</span><span class="se">\&#39;</span><span class="s">s Name&lt;/label&gt; &lt;input id=&quot;fname&quot; name=&quot;fname&quot; type=&quot;text&quot; value=&quot;&quot; /&gt; &lt;span class=&quot;errors&quot;&gt;This field is required.&lt;/span&gt; &lt;/p&gt;</span><span class="se">\n</span><span class="s">&#39;</span>
</pre></div>
</div>
<p>Within a template, all you need to do is to just call the form&#8217;s rendering function, for example:</p>
<div class="highlight-python"><pre>${myform.as_p() | n}</pre>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="form-validation-library-choice.html"
                        title="previous chapter">The Problem (The Why? of Form Library)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pyck-controllers.html"
                        title="next chapter">The pyck.controllers Package</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/pyck-forms.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pyck-controllers.html" title="The pyck.controllers Package"
             >next</a> |</li>
        <li class="right" >
          <a href="form-validation-library-choice.html" title="The Problem (The Why? of Form Library)"
             >previous</a> |</li>
        <li><a href="index.html">PyCK 0.6.6 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, 2012 Kashif Iftikhar.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>